<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Kids Will Love It — Time-Circuit Drop</title>
  <link rel="icon" type="image/svg+xml" href="./favicon.svg" />
  <style>
    :root{
      --bg0:#050910;
      --bg1:#0b1324;
      --panel:rgba(7,18,34,.72);
      --panel-soft:rgba(8,14,28,.5);
      --line:rgba(99,187,255,.28);
      --line-hot:rgba(255,158,74,.42);
      --txt:#eaf6ff;
      --muted:#96b4cc;
      --blue:#2fb8ff;
      --blue-soft:#7ed1ff;
      --orange:#ff8d3a;
      --orange-soft:#ffb170;
      --ok:#3ee0a0;
      --radius:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      color:var(--txt);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background:
        radial-gradient(900px 640px at 18% 15%, rgba(31,156,255,.20), transparent 60%),
        radial-gradient(1100px 760px at 88% 18%, rgba(255,129,44,.24), transparent 60%),
        radial-gradient(760px 580px at 50% 90%, rgba(95,177,255,.12), transparent 62%),
        linear-gradient(180deg, var(--bg0) 0%, var(--bg1) 52%, #060a12 100%);
      overflow-x:hidden;
    }
    .wrap{
      max-width:1120px;
      margin:0 auto;
      padding:18px 14px 40px;
      display:grid;
      gap:14px;
    }
    .hero{
      display:grid;
      grid-template-columns:320px 1fr;
      gap:14px;
      align-items:stretch;
    }
    @media (max-width: 980px){
      .hero{grid-template-columns:1fr}
    }
    .cover{
      border-radius:var(--radius);
      border:1px solid var(--line);
      background:var(--panel-soft);
      padding:10px;
      overflow:hidden;
      box-shadow:0 18px 44px rgba(0,0,0,.35), 0 0 0 1px rgba(104,191,255,.08) inset;
    }
    .cover img{
      width:100%;
      display:block;
      border-radius:14px;
      border:1px solid rgba(126,209,255,.24);
      box-shadow:0 14px 28px rgba(0,0,0,.35);
      object-fit:cover;
      aspect-ratio:2/3;
      background:#091524;
    }
    .card{
      border-radius:var(--radius);
      background:linear-gradient(180deg, rgba(12,25,46,.84), rgba(8,16,30,.80));
      border:1px solid var(--line);
      backdrop-filter: blur(8px);
      padding:14px;
      position:relative;
      overflow:hidden;
      box-shadow:0 14px 32px rgba(0,0,0,.32);
    }
    .card::before{
      content:"";
      position:absolute;
      inset:0 0 auto 0;
      height:2px;
      background:linear-gradient(90deg, rgba(47,184,255,0), rgba(47,184,255,.65), rgba(255,141,58,.75), rgba(255,141,58,0));
      opacity:.75;
      pointer-events:none;
    }
    .hero > .card{
      display:flex;
      flex-direction:column;
    }
    .title-row{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:10px;
    }
    h1{
      margin:0;
      font-size:26px;
      line-height:1.1;
      letter-spacing:.3px;
      color:#f4f9ff;
      text-shadow:0 0 18px rgba(57,178,255,.35);
    }
    .subtitle{
      margin:8px 0 0;
      font-size:14px;
      color:var(--muted);
      line-height:1.4;
      max-width:70ch;
    }
    .badge{
      font-size:12px;
      color:#fef3e6;
      white-space:nowrap;
      border-radius:999px;
      padding:8px 11px;
      border:1px solid var(--line-hot);
      background:rgba(255,141,58,.14);
      box-shadow:0 0 18px rgba(255,141,58,.12) inset;
    }
    .pillrow{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      margin-top:12px;
    }
    .pill{
      font-size:11px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(126,209,255,.28);
      color:#d8eeff;
      background:rgba(47,184,255,.08);
    }
    .grid{
      display:grid;
      grid-template-columns:1.12fr .88fr;
      gap:14px;
    }
    @media (max-width: 980px){
      .grid{grid-template-columns:1fr}
    }
    h2{
      margin:0 0 10px;
      font-size:13px;
      letter-spacing:.7px;
      color:#b9d5ec;
    }
    .controls{
      display:flex;
      flex-wrap:wrap;
      align-items:center;
      gap:8px;
      margin-top:6px;
    }
    button{
      appearance:none;
      border:1px solid rgba(126,209,255,.33);
      background:linear-gradient(180deg, rgba(47,184,255,.16), rgba(47,184,255,.06));
      color:var(--txt);
      padding:10px 12px;
      border-radius:10px;
      font-weight:700;
      cursor:pointer;
      transition:transform .12s ease, border-color .12s ease, background .12s ease;
    }
    button:hover{
      border-color:rgba(255,177,112,.65);
      background:linear-gradient(180deg, rgba(255,141,58,.24), rgba(47,184,255,.10));
    }
    button:active{transform:scale(.98)}
    .range{
      flex:1;
      min-width:210px;
      display:flex;
      align-items:center;
      gap:8px;
      color:var(--muted);
      font-size:12px;
    }
    .range.small{flex:.5; min-width:170px}
    input[type="range"]{
      width:100%;
      accent-color:var(--orange);
    }
    .meta{
      display:flex;
      justify-content:space-between;
      gap:10px;
      margin-top:10px;
      color:var(--muted);
      font-size:12px;
    }
    .quote{
      margin-top:12px;
      padding:11px 12px;
      border-radius:12px;
      border:1px dashed rgba(255,177,112,.35);
      color:#fbe9d4;
      background:rgba(255,141,58,.08);
      line-height:1.45;
      font-size:13px;
    }
    .quote-head{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom:6px;
    }
    .quote em{
      color:#ffd6b3;
      font-style:normal;
    }
    .btn-sample{
      padding:7px 10px;
      font-size:12px;
      border-radius:999px;
      border:1px solid rgba(255,177,112,.55);
      background:linear-gradient(180deg, rgba(255,141,58,.26), rgba(47,184,255,.10));
      color:#fff3e6;
    }
    .playlist{
      display:grid;
      gap:8px;
      margin-top:10px;
    }
    .track{
      width:100%;
      text-align:left;
      border-radius:12px;
      border:1px solid rgba(126,209,255,.28);
      background:rgba(47,184,255,.08);
      padding:10px 12px;
      color:var(--txt);
      cursor:pointer;
    }
    .track .sub{
      display:block;
      margin-top:4px;
      font-size:11px;
      color:var(--muted);
      font-weight:500;
    }
    .track.active{
      border-color:rgba(255,177,112,.7);
      background:linear-gradient(180deg, rgba(255,141,58,.22), rgba(47,184,255,.14));
      box-shadow:0 0 20px rgba(255,141,58,.15) inset;
    }
    .playlist-head{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:8px;
      font-size:12px;
      color:var(--muted);
    }
    .playlist-note{
      font-size:11px;
      color:#8da8be;
      margin-top:6px;
    }
    .viz{
      width:100%;
      height:280px;
      border-radius:14px;
      background:linear-gradient(180deg, rgba(4,12,24,.85), rgba(7,16,29,.78));
      border:1px solid rgba(126,209,255,.26);
      overflow:hidden;
      position:relative;
    }
    .hero > .card .viz{
      flex:1;
      height:100%;
      min-height:420px;
    }
    .viz svg{
      width:100%;
      height:100%;
      display:block;
    }
    .time-circuits{
      position:absolute;
      inset:10px 10px auto auto;
      padding:8px 10px;
      border-radius:11px;
      background:rgba(4,11,22,.72);
      border:1px solid rgba(126,209,255,.30);
      font-size:12px;
      color:#baddf5;
      user-select:none;
    }
    .time-circuits b{color:#fff3e3}
    .footer{
      margin-top:4px;
      text-align:center;
      color:#85a4be;
      font-size:12px;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <section class="card">
      <div class="title-row">
        <div>
          <h1 id="trackTitle">KIDS WILL LOVE IT</h1>
          <p class="subtitle" id="trackDescription">Time-circuit drop with a cinematic intro, quote slam, and halftime swamphop dubstep grit.</p>
        </div>
        <div class="badge"><span id="badgeBpm">90.25 halftime</span> • <span id="badgeKey">G-centered</span></div>
      </div>
      <div class="pillrow">
        <div class="pill">Time-circuit themed visualizer</div>
        <div class="pill">Playlist-ready player scaffold</div>
        <div class="pill">Cover-art driven color grade</div>
        <div class="pill">Auto-next on track end</div>
      </div>
      <div class="quote">
        <div class="quote-head">
          <em>Sample line:</em>
          <button id="btnSample" class="btn-sample" type="button">Play Sample</button>
        </div>
        "Guess you're not ready for that yet. But your kids will love it."
      </div>
    </section>

    <section class="hero">
      <div class="cover">
        <img id="coverImg" src="./kids.will.love.it.png" alt="Kids Will Love It artwork" />
      </div>
      <div class="card">
        <h2>VISUALIZER</h2>
        <div class="viz" id="viz">
          <div class="time-circuits">
            TIME CIRCUITS<br />
            DEST: <b id="dest">88</b> MPH<br />
            FLUX: <b id="flux">ARMED</b>
          </div>
          <svg viewBox="0 0 1000 420" preserveAspectRatio="none" aria-label="Audio visualizer">
            <defs>
              <linearGradient id="g1" x1="0" x2="1">
                <stop offset="0" stop-color="rgba(55,180,255,.55)" />
                <stop offset="1" stop-color="rgba(255,141,58,.46)" />
              </linearGradient>
              <filter id="softGlow">
                <feGaussianBlur stdDeviation="2.5" result="b" />
                <feMerge>
                  <feMergeNode in="b" />
                  <feMergeNode in="SourceGraphic" />
                </feMerge>
              </filter>
            </defs>

            <rect x="0" y="0" width="1000" height="420" fill="rgba(0,0,0,.28)"></rect>

            <g opacity=".30">
              <path d="M0 340 H1000" stroke="rgba(126,209,255,.25)" stroke-width="1" />
              <path d="M0 260 H1000" stroke="rgba(126,209,255,.18)" stroke-width="1" />
              <path d="M0 180 H1000" stroke="rgba(126,209,255,.15)" stroke-width="1" />
              <path d="M0 100 H1000" stroke="rgba(255,177,112,.16)" stroke-width="1" />
              <path d="M120 0 V420" stroke="rgba(126,209,255,.12)" stroke-width="1" />
              <path d="M260 0 V420" stroke="rgba(126,209,255,.10)" stroke-width="1" />
              <path d="M420 0 V420" stroke="rgba(126,209,255,.10)" stroke-width="1" />
              <path d="M600 0 V420" stroke="rgba(126,209,255,.10)" stroke-width="1" />
              <path d="M760 0 V420" stroke="rgba(126,209,255,.10)" stroke-width="1" />
              <path d="M900 0 V420" stroke="rgba(255,177,112,.12)" stroke-width="1" />
            </g>

            <g transform="translate(500 180)" filter="url(#softGlow)">
              <path id="tri" d="M0 -120 L105 85 L-105 85 Z" fill="none" stroke="url(#g1)" stroke-width="4" opacity=".9"></path>
              <circle id="core" cx="0" cy="-20" r="12" fill="rgba(255,185,120,.78)" opacity=".8"></circle>
              <path id="bolt" d="M0 -110 L20 -60 L-5 -60 L25 10 L-10 10 L10 85" fill="none" stroke="rgba(98,192,255,.84)" stroke-width="3" opacity=".7"></path>
            </g>

            <path id="wave" d="M0 300 C 120 300, 200 300, 320 300 S 520 300, 640 300 S 840 300, 1000 300" fill="none" stroke="rgba(137,218,255,.88)" stroke-width="3" filter="url(#softGlow)" opacity=".9"></path>
            <g id="bars" transform="translate(40 380)"></g>
            <path id="speed" d="M-40 330 Q 500 250 1040 330" fill="none" stroke="rgba(255,157,84,.18)" stroke-width="10" opacity=".35"></path>
          </svg>
        </div>
      </div>
    </section>

    <div class="grid">
      <section class="card">
        <h2>PLAYER</h2>
        <audio id="audio" preload="metadata">
          <source id="audioSource" src="./kids-will-love-it.mp3" type="audio/mpeg" />
        </audio>

        <div class="controls">
          <button id="btnPrev" aria-label="Previous track">Prev</button>
          <button id="btnPlay" aria-label="Play or pause">Play</button>
          <button id="btnNext" aria-label="Next track">Next</button>
          <button id="btnRestart" aria-label="Restart track">Restart</button>

          <div class="range">
            <span id="tCur">0:00</span>
            <input id="seek" type="range" min="0" max="1000" value="0" aria-label="Seek position" />
            <span id="tDur">0:00</span>
          </div>

          <div class="range small">
            <span>Vol</span>
            <input id="vol" type="range" min="0" max="1" step="0.01" value="0.9" aria-label="Volume" />
          </div>
        </div>

        <div class="meta">
          <div>Mode: <span id="mode">IDLE</span></div>
          <div>Status: <span id="hook">ARMING...</span></div>
        </div>
      </section>

      <section class="card">
        <h2>PLAYLIST</h2>
        <div class="playlist-head">
          <span id="nowPlayingLabel">Now playing: Track 1</span>
          <span id="trackCount">1 / 1</span>
        </div>
        <div id="playlist" class="playlist"></div>
        <div class="playlist-note">Add tracks in the `playlist` array inside the script block. UI and controls are already wired for multi-track use.</div>
      </section>
    </div>

    <div class="footer">Tip: add more files and metadata to the playlist array to convert this into a multi-track release page.</div>
  </div>

  <script>
    const playlist = [
      {
        title: "Kids Will Love It (Time-Circuit Drop)",
        subtitle: "Swamphop Dubstep",
        src: "./kids-will-love-it.mp3",
        art: "./kids.will.love.it.png",
        bpm: "90.25 halftime",
        key: "G-centered",
        description: "Clean guitar hero intro -> quote hit -> halftime drop with dubstep and metal drizzle."
      }
    ];

    const audio = document.getElementById("audio");
    const audioSource = document.getElementById("audioSource");
    const coverImg = document.getElementById("coverImg");
    const btnPrev = document.getElementById("btnPrev");
    const btnPlay = document.getElementById("btnPlay");
    const btnNext = document.getElementById("btnNext");
    const btnRestart = document.getElementById("btnRestart");
    const btnSample = document.getElementById("btnSample");
    const seek = document.getElementById("seek");
    const vol = document.getElementById("vol");
    const tCur = document.getElementById("tCur");
    const tDur = document.getElementById("tDur");
    const modeEl = document.getElementById("mode");
    const hookEl = document.getElementById("hook");
    const destEl = document.getElementById("dest");
    const fluxEl = document.getElementById("flux");
    const trackTitle = document.getElementById("trackTitle");
    const trackDescription = document.getElementById("trackDescription");
    const badgeBpm = document.getElementById("badgeBpm");
    const badgeKey = document.getElementById("badgeKey");
    const playlistEl = document.getElementById("playlist");
    const nowPlayingLabel = document.getElementById("nowPlayingLabel");
    const trackCount = document.getElementById("trackCount");

    const wave = document.getElementById("wave");
    const tri = document.getElementById("tri");
    const core = document.getElementById("core");
    const bolt = document.getElementById("bolt");
    const barsG = document.getElementById("bars");

    const clamp = (n, a, b) => Math.max(a, Math.min(b, n));
    const fmt = (s) => {
      if (!Number.isFinite(s)) return "0:00";
      const sec = Math.max(0, Math.floor(s));
      const m = Math.floor(sec / 60);
      const r = sec % 60;
      return m + ":" + (r < 10 ? "0" : "") + r;
    };

    let currentIndex = 0;
    let lastHookState = "ARMING...";
    let ctx;
    let analyser;
    let sourceNode;
    let data;
    let freq;
    const sampleAudio = new Audio("./kids.gonnaLoveit.mp3");
    sampleAudio.preload = "metadata";

    const BAR_COUNT = 48;
    const W = 920;
    const H = 120;
    const gap = 6;
    const bw = (W - (BAR_COUNT - 1) * gap) / BAR_COUNT;
    const bars = [];

    for (let i = 0; i < BAR_COUNT; i++) {
      const x = i * (bw + gap);
      const rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
      rect.setAttribute("x", x);
      rect.setAttribute("y", -2);
      rect.setAttribute("width", bw);
      rect.setAttribute("height", 2);
      rect.setAttribute("rx", 2);
      rect.setAttribute("fill", "rgba(146,222,255,.68)");
      rect.setAttribute("opacity", "0.9");
      barsG.appendChild(rect);
      bars.push(rect);
    }

    const ensureAudio = () => {
      if (ctx) return true;
      try {
        ctx = new (window.AudioContext || window.webkitAudioContext)();
        analyser = ctx.createAnalyser();
        analyser.fftSize = 2048;
        analyser.smoothingTimeConstant = 0.85;
        data = new Uint8Array(analyser.fftSize);
        freq = new Uint8Array(analyser.frequencyBinCount);
        sourceNode = ctx.createMediaElementSource(audio);
        sourceNode.connect(analyser);
        analyser.connect(ctx.destination);
        return true;
      } catch (err) {
        console.warn("WebAudio analyzer disabled:", err);
        hookEl.textContent = "Visualizer unavailable";
        if (modeEl.textContent !== "LOAD ERROR") modeEl.textContent = "AUDIO ONLY";
        return false;
      }
    };

    const setPlayLabel = () => {
      btnPlay.textContent = audio.paused ? "Play" : "Pause";
    };

    const updateTrackUI = () => {
      const track = playlist[currentIndex];
      trackTitle.textContent = track.title.toUpperCase();
      trackDescription.textContent = track.description;
      badgeBpm.textContent = track.bpm;
      badgeKey.textContent = track.key;
      coverImg.src = track.art;
      coverImg.alt = track.title + " artwork";
      nowPlayingLabel.textContent = "Now playing: " + track.title;
      trackCount.textContent = (currentIndex + 1) + " / " + playlist.length;
    };

    const renderPlaylist = () => {
      playlistEl.innerHTML = "";
      playlist.forEach((track, i) => {
        const btn = document.createElement("button");
        btn.className = "track" + (i === currentIndex ? " active" : "");
        btn.setAttribute("type", "button");
        btn.innerHTML = track.title + '<span class="sub">' + track.subtitle + " • " + track.bpm + " • " + track.key + "</span>";
        btn.addEventListener("click", () => loadTrack(i, true));
        playlistEl.appendChild(btn);
      });
    };

    const loadTrack = (index, autoplay = false) => {
      currentIndex = (index + playlist.length) % playlist.length;
      const track = playlist[currentIndex];
      const wasPlaying = !audio.paused || autoplay;

      audio.pause();
      audioSource.src = track.src;
      audio.load();
      tCur.textContent = "0:00";
      tDur.textContent = "0:00";
      seek.value = "0";

      updateTrackUI();
      renderPlaylist();
      hookEl.textContent = "ARMING...";
      if (modeEl.textContent !== "LOAD ERROR") modeEl.textContent = "IDLE";

      if (wasPlaying) {
        playCurrent();
      } else {
        setPlayLabel();
      }
    };

    const playCurrent = async () => {
      ensureAudio();
      if (ctx && ctx.state === "suspended") {
        try {
          await ctx.resume();
        } catch (err) {
          console.warn("AudioContext resume failed:", err);
        }
      }

      try {
        await audio.play();
      } catch (err) {
        console.error("Playback failed:", err);
        modeEl.textContent = "LOAD ERROR";
      }
      setPlayLabel();
    };

    btnPlay.addEventListener("click", async () => {
      if (audio.paused) {
        await playCurrent();
      } else {
        audio.pause();
      }
      setPlayLabel();
    });

    btnPrev.addEventListener("click", () => loadTrack(currentIndex - 1, !audio.paused));
    btnNext.addEventListener("click", () => loadTrack(currentIndex + 1, !audio.paused));
    btnRestart.addEventListener("click", async () => {
      audio.currentTime = 0;
      if (!audio.paused) await playCurrent();
    });
    btnSample.addEventListener("click", async () => {
      try {
        if (sampleAudio.paused) {
          sampleAudio.currentTime = 0;
          await sampleAudio.play();
          btnSample.textContent = "Stop Sample";
        } else {
          sampleAudio.pause();
          sampleAudio.currentTime = 0;
          btnSample.textContent = "Play Sample";
        }
      } catch (err) {
        console.error("Sample playback failed:", err);
        btnSample.textContent = "Sample Error";
      }
    });
    sampleAudio.addEventListener("ended", () => {
      btnSample.textContent = "Play Sample";
    });

    vol.addEventListener("input", () => {
      audio.volume = parseFloat(vol.value);
    });

    seek.addEventListener("input", () => {
      if (!audio.duration) return;
      const t = (parseFloat(seek.value) / 1000) * audio.duration;
      audio.currentTime = t;
    });

    audio.addEventListener("loadedmetadata", () => {
      tDur.textContent = fmt(audio.duration);
    });

    audio.addEventListener("timeupdate", () => {
      if (!audio.duration) return;
      seek.value = String((audio.currentTime / audio.duration) * 1000);
      tCur.textContent = fmt(audio.currentTime);
    });

    audio.addEventListener("canplay", () => {
      if (modeEl.textContent === "LOAD ERROR") modeEl.textContent = "IDLE";
    });

    audio.addEventListener("play", () => {
      setPlayLabel();
      if (modeEl.textContent !== "LOAD ERROR") modeEl.textContent = "RUN";
    });

    audio.addEventListener("pause", () => {
      setPlayLabel();
      if (modeEl.textContent !== "LOAD ERROR") modeEl.textContent = "IDLE";
    });

    audio.addEventListener("ended", () => {
      loadTrack(currentIndex + 1, true);
    });

    audio.addEventListener("error", () => {
      const code = audio.error ? audio.error.code : 0;
      const codeMap = { 1: "aborted", 2: "network", 3: "decode", 4: "src not supported" };
      modeEl.textContent = "LOAD ERROR";
      hookEl.textContent = "Audio error: " + (codeMap[code] || "unknown");
      console.error("Audio element error:", audio.error);
    });

    function animate() {
      requestAnimationFrame(animate);
      if (!analyser) return;

      analyser.getByteTimeDomainData(data);
      analyser.getByteFrequencyData(freq);

      let low = 0;
      let mid = 0;
      let high = 0;
      const n = freq.length;

      for (let i = 0; i < n; i++) {
        const v = freq[i] / 255;
        if (i < n * 0.12) low += v;
        else if (i < n * 0.45) mid += v;
        else high += v;
      }

      low /= n * 0.12;
      mid /= n * 0.33;
      high /= n * 0.55;

      const intensity = clamp(low * 1.2 + mid * 0.9 + high * 0.6, 0, 1);

      let d = "M0 300";
      const points = 64;
      for (let i = 0; i < points; i++) {
        const idx = Math.floor((i / (points - 1)) * (data.length - 1));
        const t = (data[idx] - 128) / 128;
        const x = (i / (points - 1)) * 1000;
        const y = 300 + t * (40 + intensity * 55);
        d += " L " + x.toFixed(1) + " " + y.toFixed(1);
      }
      wave.setAttribute("d", d);

      for (let i = 0; i < BAR_COUNT; i++) {
        const bin = Math.floor((i / BAR_COUNT) * (n - 1));
        const v = freq[bin] / 255;
        const h = 2 + v * H * (0.55 + intensity * 0.75);
        bars[i].setAttribute("y", (-h).toFixed(1));
        bars[i].setAttribute("height", h.toFixed(1));
        bars[i].setAttribute("opacity", (0.32 + v * 0.68).toFixed(2));
      }

      const pulse = 0.55 + intensity * 0.75;
      tri.setAttribute("opacity", (0.35 + pulse * 0.55).toFixed(2));
      core.setAttribute("opacity", (0.25 + pulse * 0.75).toFixed(2));
      bolt.setAttribute("opacity", (0.18 + pulse * 0.82).toFixed(2));

      const mph = Math.round(40 + intensity * 60);
      destEl.textContent = String(mph);
      fluxEl.textContent = mph >= 88 ? "ENGAGED" : "ARMED";

      if (audio.duration) {
        const slice = Math.floor(audio.currentTime % 16);
        const hook = (slice >= 13 && slice <= 15) ? "NOT READY (stutter)"
          : (slice === 0) ? "KIDS WILL LOVE IT (slam)"
          : "...";
        if (hook !== lastHookState) {
          hookEl.textContent = hook;
          lastHookState = hook;
        }
      }
    }

    loadTrack(0, false);
    audio.volume = parseFloat(vol.value);
    animate();
  </script>
</body>
</html>
